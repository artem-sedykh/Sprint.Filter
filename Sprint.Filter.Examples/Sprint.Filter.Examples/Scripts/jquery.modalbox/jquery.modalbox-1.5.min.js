!function(n){"use strict";var t=n(window),i=function(t,i,r){this.resizeId=((1+Math.random())*65536|0).toString(16).substring(1)+((1+Math.random())*65536|0).toString(16).substring(1),this.$element=n(i),this.type=t,this.options=this.getOptions(r);this.$element.on("click.modalbox",n.proxy(this.client_show,this));this.$appendtotarget=n(this.options.appendtotarget)};i.prototype={version:"1.5.0",isShown:!1,show:function(t,i){if(this.isShown=!0,t!==undefined){i?(this.$tempContainer=n('<div class="modalbox-tmp"/>').appendTo(document.body),this.$tempContainer.html(t),this.$modalContent.append(this.$tempContainer.children())):this.$modalContent.append(t),this.$modalWrap.appendTo(this.$appendtotarget);this.$modalWrap.on("click.dismiss.modalbox",'[data-dismiss="modalbox"]',n.proxy(this.client_hide,this))}this.resize(),this.removeProgress(),this.$modalWrap.show(),this.options.show(this.$modalWrap,this.$element),this.$modalWrap.trigger("modalbox-show");n(window).on("resize.modalbox."+this.resizeId,n.proxy(this.resize,this));this.escape(),this.$tempContainer&&this.$tempContainer.remove()},client_show:function(t){return t&&t.preventDefault(),this.isShown||(this.progress(),this.backdrop(),this.$modalWrap===undefined||this.$modalWrap===null?(this.$modalWrap=n(this.options.template),this.$modalContent=this.$modalWrap.find(".modalbox-content"),this.options.target?this.show(n(this.options.target).html(),!1):this.getAjaxContent()):this.show()),!1},client_hide:function(){this.options.close(this.$modalWrap),this.$modalWrap.trigger("modalbox-close"),this.isShown&&(this.removeBackdrop(),this.options.closetype=="hide"?this.$modalWrap.hide():(this.$modalWrap.remove(),this.$modalWrap=null),n(window).off("resize.modalbox."+this.resizeId),this.isShown=!1,this.escape())},client_destroy:function(){this.isShown?this.client_hide():this.$modalWrap!==undefined&&this.$modalWrap!==null&&this.$modalWrap.remove(),this.$element.off("click.modalbox"),this.$element.removeData(this.type)},getViewport:function(){return{x:t.scrollLeft(),y:t.scrollTop(),w:t.width(),h:t.height()}},resize:function(){if(this.isShown){var t=this.$modalWrap.width(),i=this.$modalWrap.height(),n=this.getViewport(),r=parseInt(Math.max(n.y-20,n.y+(n.h-i-40)*.5),10)-parseInt(this.$appendtotarget.offset().top),u=parseInt(Math.max(n.x-20,n.x+(n.w-t-40)*.5),10)-parseInt(this.$appendtotarget.offset().left);this.$modalWrap.css({left:u,top:r})}},backdrop:function(){this.options.backdrop&&(this.$backdrop=n('<div class="modalbox-backdrop fade in" />').appendTo(document.body))},removeBackdrop:function(){this.$backdrop!==undefined&&this.$backdrop!==null&&this.$backdrop.remove(),this.$backdrop=null},progress:function(){this.$progress=n('<div class="modalbox-loading"/>').appendTo("body").appendTo(document.body)},removeProgress:function(){this.$progress!==undefined&&this.$progress!==null&&this.$progress.remove(),this.$progress=null},escape:function(){var t=this;if(t.isShown&&t.options.keyboard)n(document).on("keyup.dismiss.modalbox"+this.resizeId,function(n){n.which===27&&t.client_hide()});else this.isShown||n(document).off("keyup.dismiss.modalbox"+this.resizeId)},getOptions:function(t){return n.extend({},n.extend(!0,{},n.fn.modalbox.defaults),t,this.$element.data())},getAjaxContent:function(){if(this.$element.attr("href")){var t=undefined;t=typeof this.options.ajaxSettings.data=="function"?this.options.ajaxSettings.data():this.options.ajaxSettings.data,n.ajax({type:this.options.ajaxSettings.type,contentType:this.options.ajaxSettings.contentType,dataType:this.options.ajaxSettings.dataType,data:t,cache:!1,url:this.$element.attr("href"),context:this,error:function(){this.removeProgress(),this.removeBackdrop(),this.isShown=!1,this.$modalWrap=null},success:function(n){this.show(n,!0)}})}else throw"href not found";}},n.fn.modalbox=function(t){return this.each(function(){var f,r,e,u;u="modalbox",f=n(this),r=n(this).data(u),e=typeof t=="object"&&t,r||f.data(u,r=new i(u,this,e)),typeof t=="string"&&r["client_"+t]()})},n.fn.modalbox.defaults={ajaxSettings:{type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",dataType:"html",data:undefined},appendtotarget:"body",closetype:"clear",backdrop:!0,show:n.noop,close:n.noop,target:undefined,keyboard:!0,template:'<div class="modalbox-wrap"><div class="modalbox-outer"><div class="modalbox-bg modalbox-bg-n"><\/div><div class="modalbox-bg modalbox-bg-ne"><\/div><div class="modalbox-bg modalbox-bg-e"><\/div><div class="modalbox-bg modalbox-bg-se"><\/div><div class="modalbox-bg modalbox-bg-s"><\/div><div class="modalbox-bg modalbox-bg-sw"><\/div><div class="modalbox-bg modalbox-bg-w"><\/div><div class="modalbox-bg modalbox-bg-nw"><\/div><div class="modalbox-content"><\/div><\/div><\/div>'},n.fn.modalbox.Constructor=i}(window.jQuery);
//@ sourceMappingURL=jquery.modalbox-1.5.min.js.map